src/main/java/
└── com/moviebooking/system/
    ├── MovieBookingSystemApplication.java   // Lớp Spring Boot chính

    //===== CÁC GÓI TÍNH NĂNG (FEATURE PACKAGES) =====
    // Mỗi gói này chứa logic nghiệp vụ trọn vẹn cho một domain
    // (Model, Repository, Service, Controller, DTO, etc.)

    ├── auth/                  // 1. Xác thực & Phân quyền (Security)
    │   ├── controller/          // AuthController (login, register, refresh-token)
    │   ├── dto/                 // LoginRequest, RegisterRequest, JwtResponse
    │   ├── service/             // AuthService, JwtService
    │   ├── security/            // UserDetailsServiceImpl, JwtAuthFilter, SecurityConstants
    │   ├── model/               // EmailVerification (nếu cần xử lý ở đây)
    │   └── repository/          // EmailVerificationRepository

    ├── user/                  // 2. Quản lý Người dùng & Thành viên
    │   ├── controller/          // UserController, MembershipController
    │   ├── service/             // UserService, MembershipService, LoyaltyService
    │   ├── repository/          // UserRepository, MembershipTierRepository, LoyaltyPointsHistoryRepository
    │   ├── model/               // User, MembershipTier, LoyaltyPointsHistory, UserSeatPreference
    │   └── dto/                 // UserDto, UserProfileDto, MembershipTierDto

    ├── movie/                 // 3. Quản lý Phim & Đánh giá
    │   ├── controller/          // MovieController, GenreController, ActorController, MovieReviewController
    │   ├── service/             // MovieService, GenreService, ActorService, MovieReviewService
    │   ├── repository/          // MovieRepository, GenreRepository, ActorRepository, DirectorRepository, MovieReviewRepository
    │   ├── model/               // Movie, Genre, Actor, Director, MovieReview, MovieActors, MovieDirectors, MovieGenres
    │   └── dto/                 // MovieDetailDto, MovieSummaryDto, ReviewDto, CreateReviewRequest

    ├── cinema/                // 4. Quản lý Rạp, Phòng & Ghế
    │   ├── controller/          // CinemaController, RoomController
    │   ├── service/             // CinemaService, RoomService, SeatService
    │   ├── repository/          // CinemaRepository, RoomRepository, SeatRepository, SeatTypeRepository
    │   ├── model/               // Cinema, Room, Seat, SeatType, CinemaReview
    │   └── dto/                 // CinemaDto, RoomLayoutDto, SeatDto

    ├── showtime/              // 5. Quản lý Suất chiếu
    │   ├── controller/          // ShowtimeController (tìm kiếm suất chiếu)
    │   ├── service/             // ShowtimeService
    │   ├── repository/          // ShowtimeRepository
    │   ├── model/               // Showtime
    │   └── dto/                 // ShowtimeDto, ShowtimeFilterRequest

    ├── booking/               // 6. Nghiệp vụ Đặt vé (CORE DOMAIN)
    │   ├── controller/          // BookingController, CheckinController
    │   ├── service/             // BookingService (orchestrator), SeatLockingService, CheckinService, GroupBookingService
    │   ├── repository/          // BookingRepository, BookingSeatRepository, SeatStatusRepository, CheckinLogRepository
    │   ├── model/               // Booking, BookingSeat, SeatStatus, CheckinLog, GroupBooking, GroupBookingMember
    │   └── dto/                 // BookingRequest, BookingResponse, TicketDto, CheckinRequest

    ├── payment/               // 7. Xử lý Thanh toán & Voucher
    │   ├── controller/          // PaymentController (nhận webhook), VoucherController
    │   ├── service/             // PaymentService, VnpayService, MomoService, VoucherService
    │   ├── repository/          // PaymentRepository, VoucherRepository, VoucherUsageHistoryRepository
    │   ├── model/               // Payment, Voucher, VoucherUsageHistory
    │   └── dto/                 // PaymentCallback, CreatePaymentRequest, ApplyVoucherDto

    ├── product/               // 8. Quản lý Combo (Đồ ăn/nước uống)
    │   ├── controller/          // ComboController
    │   ├── service/             // ComboService
    │   ├── repository/          // ComboRepository, BookingComboRepository
    │   ├── model/               // Combo, BookingCombo
    │   └── dto/                 // ComboDto

    ├── promotion/             // 9. Quản lý Khuyến mãi & Referral
    │   ├── controller/          // PromotionController, ReferralController
    │   ├── service/             // PromotionService, ReferralService
    │   ├── repository/          // PromotionRepository, UserPromotionUsageRepository, ReferralCodeRepository
    │   ├── model/               // Promotion, UserPromotionUsage, ReferralCode, ReferralUsage, AdvanceBookingRule
    │   └── dto/                 // PromotionDto, ApplyPromoRequest, ReferralDto

    ├── notification/          // 10. Hệ thống Thông báo
    │   ├── controller/          // NotificationController
    │   ├── service/             // NotificationService (core), EmailService, PushNotificationService
    │   ├── repository/          // NotificationRepository, NotificationPreferenceRepository, UserWatchlistRepository
    │   ├── model/               // Notification, NotificationPreference, UserWatchlist
    │   └── dto/                 // NotificationDto, UpdatePreferencesRequest

    ├── statistics/            // 11. Báo cáo & Thống kê (cho Admin)
    │   ├── controller/          // StatisticsController
    │   ├── service/             // StatisticsService
    │   ├── repository/          // MovieStatisticsRepository, DailyRevenueSummaryRepository
    │   ├── model/               // MovieStatistics, DailyRevenueSummary (đây là các Materialized View/Entity)
    │   └── dto/                 // RevenueReportDto, MovieStatsDto

    //===== CÁC GÓI HỖ TRỢ (CROSS-CUTTING CONCERNS) =====

    ├── config/                // Chứa các file @Configuration
    │   ├── SecurityConfig.java  // Cấu hình Spring Security, CORS
    │   ├── OpenApiConfig.java   // Cấu hình Swagger/OpenAPI
    │   ├── JpaConfig.java       // Cấu hình JPA Auditing (created_at, updated_at)
    │   ├── CacheConfig.java     // Cấu hình Redis hoặc Caffeine
    │   └── WebConfig.java       // Cấu hình Interceptors, Formatters

    ├── common/                // Các lớp dùng chung toàn hệ thống
    │   ├── exception/           // Xử lý ngoại lệ
    │   │   ├── GlobalExceptionHandler.java // @ControllerAdvice
    │   │   ├── ResourceNotFoundException.java
    │   │   ├── BadRequestException.java
    │   │   └── ApiError.java    // DTO trả về lỗi chuẩn
    │   ├── util/                // Các lớp tiện ích
    │   │   ├── DateTimeUtil.java
    │   │   ├── QrCodeUtil.java
    │   │   └── SlugUtil.java
    │   ├── dto/                 // Các DTO dùng chung
    │   │   ├── ApiResponse.java
    │   │   └── PagedResponse.java
    │   └── enums/               // Các Enums dùng chung (nếu có)

    ├── events/                // Xử lý sự kiện (Event-Driven)
    │   ├── publisher/           // Lớp bắn sự kiện (e.g., BookingEventPublisher)
    │   ├── listener/            // Lớp lắng nghe sự kiện (e.g., LoyaltyPointListener, StatisticsListener)
    │   └── model/               // Các đối tượng Event (e.g., BookingCompletedEvent, UserRegisteredEvent)

    ├── scheduler/             // Các tác vụ chạy định kỳ (CronJob)
    │   ├── SeatStatusScheduler.java  // Giải phóng ghế "held" quá hạn
    │   ├── StatisticsScheduler.java  // Cập nhật bảng thống kê
    │   ├── MovieStatusScheduler.java // Chuyển "coming_soon" -> "now_showing"

    └── audit/                 // Logging & Audit
        ├── aspect/              // AOP Aspect để log (e.g., AuditLogAspect)
        ├── service/             // AuditLogService
        ├── repository/          // AuditLogRepository, LoginAttemptRepository
        └── model/               // AuditLog, LoginAttempt

src/main/resources/
├── application.yml            // Cấu hình chính
├── application-dev.yml        // Cấu hình môi trường dev
├── application-prod.yml       // Cấu hình môi trường prod
├── db/migration/              // Thư mục cho Flyway hoặc Liquibase (RẤT NÊN DÙNG)
│   ├── V1__Initial_Schema.sql // Schema ban đầu của bạn
│   └── V2__Add_Sample_Data.sql// Dữ liệu mẫu
├── templates/email/           // Các mẫu email (HTML) nếu dùng Thymeleaf
│   ├── booking-confirmation.html
│   └── registration-verification.html
└── i18n/                      // Đa ngôn ngữ (nếu cần)
    ├── messages.properties
    └── messages_vi.properties

src/test/java/                   // Cấu trúc thư mục test
└── com/moviebooking/system/
    ├── architecture/            // (Nâng cao) Dùng ArchUnit để kiểm tra kiến trúc
    │   └── ArchitectureTest.java
    ├── booking/service/
    │   └── BookingServiceTest.java
    ├── movie/controller/
    │   └── MovieControllerTest.java
    └── ... (cấu trúc tương tự src/main/java)