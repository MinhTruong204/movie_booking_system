# Copy this file to `application.yml` and fill in secret values before running.
# This example is safe to commit; it does NOT contain real secrets.
# Replace placeholders (values in ALL_CAPS) with real values or provide them via environment variables.
#
# Example usage:
#   cp src/main/resources/application.yml.example src/main/resources/application.yml
#   Edit the new file to set real secrets/credentials.

# language: yaml
# General configuration for all environments
spring:
  profiles:
    active: dev # Default profile when running locally
  jpa:
    hibernate:
      ddl-auto: update # Will be overridden in docker environment
    show-sql: false
    properties:
      hibernate:
        format_sql: true
  jackson:
    serialization:
      write-dates-as-timestamps: true

server:
  port: 8080
  servlet:
    context-path: /

logging:
  file:
    name: logs/viecinema.log
  level:
    root: INFO
    com.viecinema: DEBUG

management:
  endpoints:
    web:
      exposure:
        include: health,info,metrics,mappings

springdoc:
  api-docs:
    path: /v3/api-docs
  swagger-ui:
    path: /swagger-ui.html
    tags-sorter: alpha
    operations-sorter: alpha
    display-request-duration: true
    try-it-out-enabled: true
  show-actuator: false

security:
  jwt:
    # Replace with a secure secret (do NOT commit real secret to VCS)
    secret: ${JWT_SECRET:REPLACE_WITH_SECURE_JWT_SECRET}
    expiration: ${JWT_EXPIRATION:7d}

app:
  name: viecinema
  timezone: UTC
  development:
    ignore-showtime-time-filter: false
  base-url: http://localhost:8080  # Dev
  frontend-url: http://localhost:3000  # Frontend URL for redirects

vnpay:
  # Information from VNPay Sandbox
  tmn-code: VNPAY_TMN_PLACEHOLDER # e.g.: DEMOV01P
  hash-secret: VNPAY_HASH_PLACEHOLDER  # e.g.: LMREXAMPLEKEY123456789
  api-url: https://sandbox.vnpayment.vn/paymentv2/vpcpay.html
  return-url: ${app.base-url}/api/payments/vnpay/callback  # URL to receive results
  ipn-url: ${app.base-url}/api/payments/vnpay/ipn  # URL to receive IPN (Instant Payment Notification)

  # Timeout settings
  timeout: 15  # 15 minutes

  # Version settings
  version: 2.1.0
  command: pay
  currency-code: VND
  locale: vn  # vn or en

---
# Configuration for Development environment (dev)
spring:
  config:
    activate:
      on-profile: dev
  datasource:
    url: "jdbc:mysql://localhost:3306/movie_booking_system?useSSL=false&allowPublicKeyRetrieval=true&serverTimezone=UTC"
    username: DB_USER_PLACEHOLDER
    password: DB_PASSWORD_PLACEHOLDER
    driver-class-name: "com.mysql.cj.jdbc.Driver"

---
# Configuration for Docker environment
spring:
  config:
    activate:
      on-profile: docker
  # In docker environment, datasource values will be provided entirely
  # by environment variables in docker-compose.yml; no need to define them here.
  jpa:
    hibernate:
      ddl-auto: validate # Safer for "production-like" environments

